<!DOCTYPE html>
<html>
<header>
	<title>WROTiTT Forum</title>
</header>

<head>
	<style>
		.hidden {
			display: none;
		}
	</style>
	<link rel="stylesheet" href="style.css" />
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
</head>

<!----------------------------------------Start of Main Body---------------------------------------->


<body id="MainBod" style="margin-left:0px; background-color:rgb(0, 119, 158); min-height:100%">
	<style>
		div.a {
			text-align: center;
		}

		div.PostnFeedDiv {
			text-align: center;
		}
	</style>

	<!---------------------Header--------------------->

	<div id="header"
		style="margin:0px; padding:0px; background-color:whitesmoke; width: 100%; height: fit-content; border:3px groove deepskyblue">
		<img id="headerLogo"
			style="float: left; align-self :center; width:52px; height: 60px; margin-left:20px; margin-top:30px; margin-bottom:5px; margin-right:5%;"
			src="WrottitLogo.png">
		<div id="headerText" class="a" style="text-align: center; display: inline">
			<h1 id="appName" class="multicolor"
				style="text-shadow: 3px 0px 6px lightskyblue; margin-left: 5%; padding-top:15px; padding-bottom:5px; margin-right:8%;  color:deepskyblue;">
				WROTiTT
			</h1>
			<h2 class="multicolor" id="uName"
				style="color: deepskyblue; text-shadow: 2px 0px 4px skyblue; padding-bottom: 5px">
			</h2>
			<button hidden style="float:right; margin-right:60px; margin-top:-45px; margin-bottom:5px;" type="button"
				id="logout">Logout</button>
		</div>
	</div>
	<hr>

	<!---------------------Login and Register Section--------------------->

	<div id="loginContainer" style="background-color: white">

		<!-- App Description Div -->

		<div style="text-align: center; color:rgb(0, 152, 202); height: fit-content" id="app">
			<h3><b>WROTiTT:</b> <i>Write to be heard on a global scale</i></h3>
			<p>WROTiTT gives you a way to share your ideas to the world, with user posts reaching everyone on the
				platform!</p>
			<p>Post your thoughts if you have an orginial idea, or give feedback on someone elses idea by liking or
				commenting!</p>
			<p><i>~~Please be respectful and conciencious when sharing~~</i></p>
		</div>

		<hr> <!-- Login and Register Div -->

		<div style="color:rgb(0, 152, 202);" id="login">

			<div>
				<!-- Login -->
				<h2 style="padding:10px; padding-bottom:0px; padding-top:0px;"><b>Log In -- Exisiting Users</b></h2>
				<p style="padding-left:15px;"> <b>Enter Your Email and Password to Login</b> </p>
				<input style="margin-left:15px;" type="text" id="logemail" placeholder="Login with Email" />
				<input type="password" id="logpass" placeholder="Login Password" />
				<button type="button" id="login">Click Here To Login</button>
			</div>

			<hr style="margin-top:20px; color:rgb(0, 119, 158)">

			<div>
				<!-- Register -->
				<h2 style="padding:0px 10px 0px 10px; "><b>REGISTER -- New Users</b></h2>
				<p style="padding-left:15px;">
					<b>
						Enter Login Email :<input style="margin-right:25px;" type="text" id="regemail"
							placeholder="Register Email" />
						Enter Display Name :<input type="text" id="userNameInput"
							placeholder="Type Desired User Name" />
					</b>
				</p>
				<p style="padding-left:15px;">
					<b>
						Enter New Password :<input style="margin-right:10px;" type="password" id="regpass1"
							placeholder="Register Password" />
						Confirm New Password:<input type="password" id="regpass2" placeholder="Confirm Password" />
					</b>
				</p>
				<button style="margin-left:15px;" type="button" id="register">Click Here To Register</button>
			</div>

		</div>
		<hr>
	</div>


	<!---------------------Div Containing Main App--------------------->


	<div hidden id="appContainer"
		style="position:relative; margin:0px; padding:0px; text-align:center; background-color:rgb(73, 161, 216); width: 100%; height: fit-content; border:5px groove deepskyblue; min-height:100%; border-right:0px">

		<!-------Profile Div------->

		<div id="profileDiv" class="a"
			style="color: whitesmoke; margin:0px; padding:0px; display: inline-block;  width: 19%; background-color: rgb(0, 142, 189); vertical-align: top; position:absolute; top:0; bottom:0; left:0;">
			
			<h2 class="multicolor"><u>Profile:</u> </h2>
			<h3 id="profName"></h3>
			Name: <input type="text" id="name">
			<button id="nameChanger">Change Name</button>
		</div>

		<!-------Posting and Feed Div------->

		<div id="postAndFeedDiv" class="PostnFeedDiv"
			style="color: rgb(0, 98, 131);margin:0px; margin-left:0; padding:0px; display: inline-block; *display: inline; width: 60%; background-color: lightskyblue; border: 5px solid rgb(0, 142, 189); vertical-align: top; height:100%;">
			<h2 class="multicolorF"><u>Feed: Posts & Comments</u></h2>
			<p class="multicolorF">Welcome, <b id="UsrNme">--</b></p>

			<!-- Post Section-->
			<p class="multicolorF">Type what you want to post:
				<button onclick="printPost()">Post</button>
			</p>
			<p><textarea rows="5" cols="50" id="post"></textarea></p>
			<p></p>
			<button onclick="getPost()">Refresh Posts</button>
			<p></p>

			<!--Comment Template-->
			<template class="commentPost" id="productComment">
				<hr>
				<h4 style="text-align: left; padding-bottom: 1px"></h4>
				<p style="text-align: center; padding-bottom: 1px; padding-top: 1px"></p>
				<h5 style="text-align: right; padding-left: 20%; padding-top: 1px"></h5>
				<hr>
			</template>

			<!------- Feed: Live(Most Recent) Posts------->

			<!--PostDiv1-->
			<div id="postbox1" class="postbox">

				<div id="post1" style="background-color: rgb(242, 254, 255)">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect1">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter1" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>
			
			<!--PostDiv2-->
			<div id="postbox2" class="postbox">

				<div id="post2" style="background-color: rgb(242, 254, 255)">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect2">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter2" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>
			
			<!--PostDiv3-->
			<div id="postbox3" class="postbox">

				<div id="post3" style="background-color: rgb(242, 254, 255)">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect3">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter3" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>

			<!--PostDiv4-->
			<div id="postbox4" class="postbox">

				<div id="post4" style="background-color: rgb(242, 254, 255)">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect4">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter4" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>

			<!--PostDiv5-->
			<div id="postbox5" class="postbox">

				<div id="post5" style="background-color: rgb(242, 254, 255)">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect5">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter5" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>
			<!--End Post Divs-->

			<button id="previouspage" onclick="prevPage()">Previous Page</button>
			<b id="PageNum">...</b>
			<button id="nextpage" onclick="nextPage()">Next Page</button>

		</div>

		<!-------Profile Options Div------->
		<div id="settingsDiv" class="a"
			style="color: whitesmoke; padding:0px; margin:0px; display: inline-block; *display: inline; width: 19%; background-color: rgb(0, 142, 189); vertical-align: top; height:100%; position:absolute; top:0; bottom:0; left:81%;">
			<h2 style="padding:0px; margin:0px;" class="multicolor"><u>Settings:</u></h2>
			<h3 style="padding:0px; margin:0px;" class="multicolor">Color and Customization</h3>
			<p></p>
			Customize Feed Color: <input type="color" id="wordColor">
			<p></p>
		</div>

	</div>




	<!----------------------------------------- Scripts --------------------------------------------->



	<!--Script for FireBase-->
	<script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js"></script>


	<!--Contains Functions Involving FireBase User-->
	<script type="module">
		import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
		import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-analytics.js";
		import * as rtdb from "https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js";
		import * as fbauth from "https://www.gstatic.com/firebasejs/9.5.0/firebase-auth.js";

		// Web app's Firebase configuration
		const firebaseConfig = {
			apiKey: "AIzaSyDZL_f4w_BPe5lECZbi8X8RRwGDvBQ6fqQ",
			authDomain: "wrotitt.firebaseapp.com",
			projectId: "wrotitt",
			storageBucket: "wrotitt.appspot.com",
			messagingSenderId: "475941908991",
			appId: "1:475941908991:web:d1fc0a5bfebf0abc4cf7ca",
			measurementId: "G-NYE3N51PPQ"
		};

		// Initialize Firebase
		const app = initializeApp(firebaseConfig);
		const analytics = getAnalytics(app);

		// FireBase DataBase object
		let db = rtdb.getDatabase(app);
		// FireBase Auth object
		let auth = fbauth.getAuth(app);


		// Function called to render user info and show logout button
		let renderUser = function (userObj) {
			fbauth.reload(userObj);
			if (userObj.displayName != null) {
				document.getElementById("uName").innerText = "Logged in as:" + userObj.email + "!";
				document.getElementById("UsrNme").innerText = userObj.displayName;
				document.getElementById("profName").innerText = userObj.displayName + "'s Preferences:";
			} else {
				document.getElementById("UsrNme").innerText = "User" + userObj.uid;
				document.getElementById("uName").innerText = "Logged in as:" + userObj.email + "!";
				document.getElementById("profName").innerText = userObj.email + "'s Preferences:";
			}

			$("#app").html("");
			$("#logout").show();
			$("#logout").on("click", () => {
				fbauth.signOut(auth);
				$("#uName").hide();
			})
		}


		// Function that runs everytime current user state changes
		fbauth.onAuthStateChanged(auth, user => {
			// if user exists --> show app, hide login
			if (!!user) {
				$("#login").hide();
				$("#loginContainer").hide();
				$("#uName").show();
				$("#appContainer").show();
				renderUser(user);
				let flagRef = rtdb.ref(db, "/flag");
				console.log("here");
				rtdb.onValue(flagRef, ss => {
					alert(ss.val());
				})
			// if user doesnt exist --> hide app, show login
			} else {
				$("#loginContainer").show();
				$("#login").show();
				$("#logout").hide();
				$("#uName").innerText = "Login or Create an Account to Enjoy the App!"
				$("#app").html("<h3><b>WROTiTT:</b> <i>Write to be heard on a global scale</i></h3><p>WROTiTT gives you a way to share your ideas to the world, with user posts reaching everyone on the platform!</p><p>Post your thoughts if you have an orginial idea, or give feedback on someone elses idea by liking or commenting!</p><p><i>~~Please be respectful and conciencious when sharing~~</i></p>");
				$("#appContainer").hide();
			}
		});


		// Function used to change the Display name of the current user
		$("#nameChanger").on("click", () => {
			fbauth.updateProfile(auth.currentUser, { displayName: document.getElementById("name").value, photoURL: null }).catch(function (error) {
				console.log(error);
			});
			fbauth.reload(auth.currentUser);
			document.getElementById("profName").innerText = document.getElementById("name").value + "'s Preferences:";
			document.getElementById("UsrNme").innerText = document.getElementById("name").value;
			$.ajax({
				method: "POST",
				url: "cheatsheet.php",
				data: { "receiver_name": document.getElementById("name").value },
				success: function (data) {

				}
			})
		});


		// Function used to register a new user
		$("#register").on("click", () => {
			let email = $("#regemail").val();
			let p1 = $("#regpass1").val();
			let p2 = $("#regpass2").val();
			let dispName = $("#userNameInput").val();
			if (p1 != p2) {
				alert("Passwords don't match");
				return;
			}
			if (dispName == "" || dispName == " ") {
				alert("Invalid Username");
				return;
			}
			fbauth.createUserWithEmailAndPassword(auth, email, p1).then(somedata => {//userNameInput
				let uid = somedata.user.uid;
				fbauth.updateProfile(somedata.user, { displayName: dispName, photoURL: null }).catch(function (error) {
					console.log(error);
				});
				let userRoleRef = rtdb.ref(db, `/users/${uid}/roles/user`);
				rtdb.set(userRoleRef, true);
			}).catch(function (error) {
				// Handle Errors here.
				var errorCode = error.code;
				var errorMessage = error.message;
				console.log(errorCode);
				console.log(errorMessage);
			});
		});


		// Function to log in as an existing user
		$("#login").on("click", () => {
			let email = $("#logemail").val();
			let pwd = $("#logpass").val();
			fbauth.signInWithEmailAndPassword(auth, email, pwd).then(
				somedata => {
					console.log(somedata);
				}).catch(function (error) {
					// Handle Errors here.
					var errorCode = error.code;
					var errorMessage = error.message;
					console.log(errorCode);
					console.log(errorMessage);
				});
		});
	</script>


	<!-- Script containing functions for rendering the Feed, Posting, Commenting, and Liking -->
	<script>
		var postCount = 0;
		var postData = "";
		var usrName = "";
		var postLikes = 0;
		var postCommNum = 0;

		var postNum = 0;
		var loadNum = 5;
		var MaxPostNum = 0;
		var pageNumber = 1;

		var likedPostNum;
		var likedPostNum1;
		var likedPostNum2;
		var likedPostNum3;
		var likedPostNum4;

		getPost();
		//sleep(200);
		//getPost();


		// ----------------------------Function for adding likes----------------------------
		var add_like = function (data) {
			$.ajax({
				method: "POST",
				url: "postHandle.php",
				data: { "postId": data },
				success: function (data) {
				}
			})
			getPost();
		}


		// ----------------------------Function for adding new comments----------------------------
		var add_comment = function (parentPost, postSlot, commentCount) {
			var newCommTexts = document.querySelectorAll('.commText');
			if (postSlot == 0) {
				var commData = newCommTexts[0].value;
				newCommTexts[0].value = "";
			} else if (postSlot == 1) {
				var commData = newCommTexts[1].value;
				newCommTexts[1].value = "";
			} else if (postSlot == 2) {
				var commData = newCommTexts[2].value;
				newCommTexts[2].value = "";
			} else if (postSlot == 3) {
				var commData = newCommTexts[3].value;
				newCommTexts[3].value = "";
			} else if (postSlot == 4) {
				var commData = newCommTexts[4].value;
				newCommTexts[4].value = "";
			}
			let commUserName = document.getElementById("UsrNme").innerText;
			if (commentCount != 0) {
				commData = "&&" + commData;
				commUserName = "&&" + commUserName;
			}
			console.debug(parentPost);
			console.debug(commData);
			console.log(commUserName);
			console.log(commentCount);
			$.ajax({
				method: "POST",
				url: "postHandle.php",
				data: { "parentPostId": parseInt(parentPost), "commentData": commData, "usrName": commUserName },
				success: function (data) {
					getPost(data);
				}
			})
			getPost();
		}


		//----------------------------Function to get and load the comments for current posts in Feed----------------------------
		function getComment(tmpVar, postDispNum, numComms) {
			console.log(tmpVar);
			console.log(postDispNum);

			$.ajax({
				method: "GET",
				url: "postHandle.php",
				data: { "commentedPost": tmpVar },
				success: function (data) {

					console.log(data);
					console.log(" ");

					//Post Display Slot 1
					if (postDispNum == 1) {
						let commbody = document.getElementById('commentSect1');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);

						}
					}

					//Post Display Slot 2
					else if (postDispNum == 2) {
						let commbody = document.getElementById('commentSect2');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);
						}
					}

					//Post Display Slot 3
					else if (postDispNum == 3) {
						let commbody = document.getElementById('commentSect3');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);
						}
					}

					//Post Display Slot 4
					else if (postDispNum == 4) {
						let commbody = document.getElementById('commentSect4');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);
						}
					}

					//Post Display Slot 5
					else if (postDispNum == 5) {
						let commbody = document.getElementById('commentSect5');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);
						}
					}
				}
			})
		}


		//----------------------------Function to Add New Post to Feed----------------------------
		var printPost = function () {
			$.ajax({
				method: "POST",
				url: "postHandle.php",
				data: { "postName": document.getElementById("UsrNme").innerText, "postText": document.getElementById("post").value },
				success: function (data) {

				}
			})
			document.getElementById("post").value = "";
			sleep(250);
			getPost();
		}


		//----------------------------Function to get the posts for Feed----------------------------
		function getPost() {
			$.ajax({
				method: "GET",
				url: "postHandle.php",
				data: { "postNum": postNum, "pageNum": pageNumber },
				success: function (data) {
					outPost(data);
				}
			})
		}


		//----------------------------Function to load and display the posts in Feed----------------------------
		var outPost = function (data) {

			var tbody = document.querySelector('.PostnFeedDiv');
			var cTexts = tbody.querySelectorAll('.commText');
			var cText_1 = cTexts[0];
			var cText_2 = cTexts[1];
			var cText_3 = cTexts[2];
			var cText_4 = cTexts[3];
			var cText_5 = cTexts[4];
			for (postNum = 0; postNum < 25; postNum += 5) {
				usrName = data[postNum + 1];
				postCount = data[postNum];
				if (postCount > MaxPostNum) {
					MaxPostNum = postCount;
				}
				postLikes = data[postNum + 2];
				postData = data[postNum + 3];
				postCommNum = data[postNum + 4];

				//Post Display Slot 1
				if (postNum / 5 == 0) {
					console.log(postCommNum);
					let postbody = document.getElementById('postbox1');
					let postDispName = postbody.querySelectorAll("h3");
					let postDispLikes = postbody.querySelectorAll("h5");
					let postDispData = postbody.querySelectorAll("p");
					let butt = postbody.querySelectorAll("button");
					let cmts = postbody.querySelectorAll('.commText');

					postDispName[0].textContent = "User: " + usrName;
					postDispLikes[0].textContent = "Likes: " + postLikes;
					postDispData[0].textContent = postData;

					likedPostNum = postCount;
					let commCount = postCommNum;
					butt[0].onclick = function () { add_like(likedPostNum); }
					if ((cText_1 != null) || (cText_1 != undefined)) {
						cmts[0].value = cText_1.value;
					} else { cmts[0].value = ""; }
					butt[1].onclick = function () { add_comment(likedPostNum, 0, commCount); }

					if (postCommNum != 0) {
						getComment(postCount, 1, postCommNum);
					} else {
						let commbody = document.getElementById('commentSect1');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
					}
				}

				//Post Display Slot 2
				else if (postNum / 5 == 1) {
					if (data[postNum + 3] == undefined) {
						$("#postbox2").hide();
					}
					else {
						$("#postbox2").show();
						console.log(postCommNum);
						let postbody = document.getElementById('postbox2');
						let postDispName = postbody.querySelectorAll("h3");
						let postDispLikes = postbody.querySelectorAll("h5");
						let postDispData = postbody.querySelectorAll("p");
						let butt = postbody.querySelectorAll("button");
						let cmts = postbody.querySelectorAll('.commText');

						postDispName[0].textContent = "User: " + usrName;
						postDispLikes[0].textContent = "Likes: " + postLikes;
						postDispData[0].textContent = postData;

						likedPostNum1 = postCount;
						let commCount1 = postCommNum;
						butt[0].onclick = function () { add_like(likedPostNum1); }
						if ((cText_2 != null) || (cText_2 != undefined)) {
							cmts[0].value = cText_2.value;
						} else { cmts[0].value = ""; }
						butt[1].onclick = function () { add_comment(likedPostNum1, 1, commCount1); }

						if (postCommNum != 0) {
							getComment(postCount, 2, postCommNum);
						} else {
							let commbody = document.getElementById('commentSect2');
							commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						}
					}
				}

				//Post Display Slot 3
				else if (postNum / 5 == 2) {
					if (data[postNum + 3] == undefined) {
						$("#postbox3").hide();
					}
					else {
						$("#postbox3").show();
						let postbody = document.getElementById('postbox3');
						let postDispName = postbody.querySelectorAll("h3");
						let postDispLikes = postbody.querySelectorAll("h5");
						let postDispData = postbody.querySelectorAll("p");
						let butt = postbody.querySelectorAll("button");
						let cmts = postbody.querySelectorAll('.commText');

						postDispName[0].textContent = "User: " + usrName;
						postDispLikes[0].textContent = "Likes: " + postLikes;
						postDispData[0].textContent = postData;

						likedPostNum2 = postCount;
						let commCount2 = postCommNum;
						butt[0].onclick = function () { add_like(likedPostNum2); }
						if ((cText_3 != null) || (cText_3 != undefined)) {
							cmts[0].value = cText_3.value;
						} else { cmts[0].value = ""; }
						butt[1].onclick = function () { add_comment(likedPostNum2, 2, commCount2); }

						if (postCommNum != 0) {
							getComment(postCount, 3, postCommNum);
						} else {
							let commbody = document.getElementById('commentSect3');
							commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						}
					}
				}

				//Post Display Slot 4
				else if (postNum / 5 == 3) {
					if (data[postNum + 3] == undefined) {
						$("#postbox4").hide();
					}
					else {
						$("#postbox4").show();
						let postbody = document.getElementById('postbox4');
						let postDispName = postbody.querySelectorAll("h3");
						let postDispLikes = postbody.querySelectorAll("h5");
						let postDispData = postbody.querySelectorAll("p");
						let butt = postbody.querySelectorAll("button");
						let cmts = postbody.querySelectorAll('.commText');

						postDispName[0].textContent = "User: " + usrName;
						postDispLikes[0].textContent = "Likes: " + postLikes;
						postDispData[0].textContent = postData;

						likedPostNum3 = postCount;
						let commCount3 = postCommNum;

						butt[0].onclick = function () { add_like(likedPostNum3); }
						if ((cText_4 != null) || (cText_4 != undefined)) {
							cmts[0].value = cText_4.value;
						} else { cmts[0].value = ""; }
						butt[1].onclick = function () { add_comment(likedPostNum3, 3, commCount3); }

						if (postCommNum != 0) {
							getComment(postCount, 4, postCommNum);
						} else {
							let commbody = document.getElementById('commentSect4');
							commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						}
					}
				}

				//Post Display Slot 5
				else if (postNum / 5 == 4) {
					if (data[postNum + 3] == undefined) {
						$("#postbox5").hide();
					}
					else {
						$("#postbox5").show();
						let postbody = document.getElementById('postbox5');
						let postDispName = postbody.querySelectorAll("h3");
						let postDispLikes = postbody.querySelectorAll("h5");
						let postDispData = postbody.querySelectorAll("p");
						let butt = postbody.querySelectorAll("button");
						let cmts = postbody.querySelectorAll('.commText');

						postDispName[0].textContent = "User: " + usrName;
						postDispLikes[0].textContent = "Likes: " + postLikes;
						postDispData[0].textContent = postData;

						likedPostNum4 = postCount;
						let commCount4 = postCommNum;

						butt[0].onclick = function () { add_like(likedPostNum4); }
						if ((cText_5 != null) || (cText_5 != undefined)) {
							cmts[0].value = cText_5.value;
						} else { cmts[0].value = ""; }
						butt[1].onclick = function () { add_comment(likedPostNum4, 4, commCount4); }

						if (postCommNum != 0) {
							getComment(postCount, 5, postCommNum);
						} else {
							let commbody = document.getElementById('commentSect5');
							commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						}
					}
				}
			}
			document.getElementById("PageNum").innerText = pageNumber;
			$("#profileDiv").style.height = $("#postAndFeedDiv").style.height;
			$("#settingsDiv").style.height = $("#postAndFeedDiv").style.height;
		}

		//setInterval (getPost,25000);



		//----------------------------Function to move to Previous Page on Feed----------------------------
		var prevPage = function () {
			if (pageNumber > 1) {
				pageNumber = pageNumber - 1;
			}
			getPost();
		}


		//----------------------------Function to move to Next Page on Feed----------------------------
		var nextPage = function () {
			if (pageNumber < ((MaxPostNum - 1) / 5) + 1) {
				pageNumber = pageNumber + 1;
			}
			getPost();
		}


		//----------------------------Function to get color from a number----------------------------
		var toColor = function (d) {
			var c = Number(d).toString(16);
			return "#" + ("000000".substr(0, 6 - c.length) + c.toUpperCase());
		}


		//----------------------------Function to change the color of the Feed----------------------------
		var changeColorHandler = function (evt) {
			let mycolor = evt.currentTarget.value
			let wordColor = toColor((Number(Number(mycolor).toString(16)) + 0x777777) % 0xffffff);
			var FeedBackgnd = document.getElementsByClassName("PostnFeedDiv");
			FeedBackgnd[0].style.background = mycolor;
			var elements = document.getElementsByClassName("multicolorF");
			for (var i = 0; i < elements.length; i++) {
				elements[i].style.color = wordColor;
			}
		}


		//----------------------------Function that runs everytime selected Feed color changes----------------------------
		document.querySelector("#wordColor").addEventListener(
			"change",
			changeColorHandler
		)


		// ----------------------------sleep function----------------------------
		function sleep(milliseconds) {
			const date = Date.now();
			let currentDate = null;
			do {
				currentDate = Date.now();
			} while (currentDate - date < milliseconds);
		}

	</script>
</body>

</html>