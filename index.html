<!DOCTYPE html>
<html>
<header>
	<title>WROTiTT Forum</title>
</header>

<head>
	<style>
		.hidden {
			display: none;
		}
	</style>
	<link rel="stylesheet" href="style.css" />
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
</head>

<!-- Start of Main Body-->

<body id="MainBod" style="background-color:black; min-height:100%">
	<style>
		div.a {
			text-align: center;
		}

		div.PostnFeedDiv {
			text-align: center;
		}
	</style>

	<!-- Title and Intro Div -->
	<div class="a" style="background-color:dimgrey ">
		<h1 class="multicolor" style="color:white;">WROTiTT</h1>
		<h2 class="multicolor" id="uName"></h2>
		<p></p>
	</div>

	<div style="color:white;" id="login">
		<input type="text" id="regemail" placeholder="Register Email"/>
		<input type="password" id="regpass1" placeholder="Register Password"/>
		<input type="password" id="regpass2" placeholder="Confirm Password"/>
		<button type="button" id="register">Click Here To Register</button>
		<hr>
		<input type="text" id="logemail" placeholder="Login with Email"/>
		<input type="password" id="logpass" placeholder="Login Password"/>
		<button type="button" id="login">Click Here To Login</button>
	  </div>
	  <hr>
	  <div style="color:white;" id="app">
		<h2>Login to enjoy the app</h2>
	  </div>
	  <hr>
	  <h1>My Security Rules Are Cool</h1>
	  <div style="color:white;" id="rules">
	  </div>

	<!-- Div containing 3 vertical divs -->
	<div hidden id="appContainer" style="background-color:dimgrey; min-height:100%">


		<!-- Social Div -->
		<div class="a"
			style="display: inline-block; *display: inline; width: 19%; background-color: slategrey; vertical-align: top; min-height:100%;">

			<div class="a" style="background-color: grey;">
				<h2 class="multicolor">Social: Friends & Events</h2>
			</div>

			<h3 id="correct_count">Correct Guesses</h3>
			<h2 id="correct"></h2>
			<!-- <ul id = "correct-answers"></ul> -->
		</div>

		<!-- Posting and Feed div -->
		<div class="PostnFeedDiv"
			style="display: inline-block; *display: inline; width: 60%; background-color: silver; vertical-align: top; height:100%;">
			<h2 class="multicolorF">Feed: Posts & Comments</h2>
			<p class="multicolorF">Welcome, <b id="UsrNme">--</b></p>
			<p class="multicolorF">Type what you want to post:
				<button onclick="printPost()">Post</button>
			</p>
			<p><textarea rows="5" cols="50" id="post"></textarea></p>
			<p></p>
			<button onclick="getPost()">Refresh Posts</button>
			<p></p>

			<!--Comment Template-->

			<template class="commentPost" id="productComment">
				<hr>
				<h4 style="text-align: left; padding-bottom: 1px"></h4>
				<p style="text-align: center; padding-bottom: 1px; padding-top: 1px"></p>
				<h5 style="text-align: right; padding-left: 20%; padding-top: 1px"></h5>
				<hr>
			</template>
			<!--Template-->

			<!--Post Divs-->
			<!--PostDiv1-->
			<div id="postbox1" class="postbox">

				<div id="post1" style="background-color: white">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect1" style="background-color: lightgrey">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter1" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>
			<!--PostDiv2-->
			<div id="postbox2" class="postbox">

				<div id="post2" style="background-color: white">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect2" style="background-color: lightgrey">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter2" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>
			<!--PostDiv3-->
			<div id="postbox3" class="postbox">

				<div id="post3" style="background-color: white">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect3" style="background-color: lightgrey">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter3" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>
			<!--PostDiv4-->
			<div id="postbox4" class="postbox">

				<div id="post4" style="background-color: white">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect4" style="background-color: lightgrey">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter4" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>
			<!--PostDiv5-->
			<div id="postbox5" class="postbox">

				<div id="post5" style="background-color: white">
					<h3 style="text-align: left; padding-bottom: 5px"></h3>
					<p style="text-align: center; padding-bottom: 5px; padding-top: 5px"></p>
					<h5 style="text-align: right; padding-top: 5px"></h5>
					<div class="commentbox" id="commentSect5" style="background-color: lightgrey">
						<h4 style="text-align: left; padding-left: 2px">Comments:</h4>
					</div>
				</div>

				<div id="postfooter5" style="width:100%">
					<button> Like </button> or <b>Comment:</b><input class="commText"
						style="display: inline-block; *display: inline" type="text"><button
						style="display: inline-block; *display: inline;">Submit Comment</button>
				</div>

			</div>
			<!--End Post Divs-->

			<button id="previouspage" onclick="prevPage()">Previous Page</button><b id="PageNum">...</b><button
				id="nextpage" onclick="nextPage()">Next Page</button>
		</div>

		<!-- Profile Options Div -->
		<div class="a"
			style="display: inline-block; *display: inline; width: 19%; background-color: slategrey; vertical-align: top; height: 100%;">
			<div class="a" style="background-color: grey;">
				<h2 class="multicolor">User: Profile and Options</h2>
			</div>

			<h3 id="profName"></h3>
			Name: <input type="text" id="name">
			<button onclick="submitName()">Change Name</button>
			<p></p>
			Customize Feed Color: <input type="color" id="wordColor">
			<p></p>
		</div>

	</div>

	<script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js"></script>
	<script type="module">
		// Import the functions you need from the SDKs you need
		import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
		import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-analytics.js";
		import * as rtdb from "https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js";
		import * as fbauth from "https://www.gstatic.com/firebasejs/9.5.0/firebase-auth.js";
		// TODO: Add SDKs for Firebase products that you want to use
		// https://firebase.google.com/docs/web/setup#available-libraries

		// Your web app's Firebase configuration
		// For Firebase JS SDK v7.20.0 and later, measurementId is optional
		const firebaseConfig = {
			apiKey: "AIzaSyDZL_f4w_BPe5lECZbi8X8RRwGDvBQ6fqQ",
			authDomain: "wrotitt.firebaseapp.com",
			projectId: "wrotitt",
			storageBucket: "wrotitt.appspot.com",
			messagingSenderId: "475941908991",
			appId: "1:475941908991:web:d1fc0a5bfebf0abc4cf7ca",
			measurementId: "G-NYE3N51PPQ"
		};

		// Initialize Firebase
		const app = initializeApp(firebaseConfig);
		const analytics = getAnalytics(app);

		let db = rtdb.getDatabase(app);
		let auth = fbauth.getAuth(app);

		let renderUser = function (userObj) {
			$("#app").html(JSON.stringify(userObj));
			$("#app").append(`<button type="button" id="logout">Logout</button>`);
			$("#logout").on("click", () => {
				fbauth.signOut(auth);
			})
		}

		fbauth.onAuthStateChanged(auth, user => {
			if (!!user) {
				$("#login").hide();
				$("#app").show();
				$("#appContainer").show();
				renderUser(user);
				let flagRef = rtdb.ref(db, "/flag");
				console.log("here");
				rtdb.onValue(flagRef, ss => {
					alert(ss.val());
				})
			} else {
				$("#login").show();
				$("#app").html("");
				$("#appContainer").hide();
			}
		});


		let rulesRef = rtdb.ref(db, "/rules");
		rtdb.onValue(rulesRef, ss => {
			let rules = ss.val();
			if (!!rules) {
				$("#rules").html(rules);
			}
		})


		$("#register").on("click", () => {
			let email = $("#regemail").val();
			let p1 = $("#regpass1").val();
			let p2 = $("#regpass2").val();
			if (p1 != p2) {
				alert("Passwords don't match");
				return;
			}
			fbauth.createUserWithEmailAndPassword(auth, email, p1).then(somedata => {
				let uid = somedata.user.uid;
				let userRoleRef = rtdb.ref(db, `/users/${uid}/roles/user`);
				rtdb.set(userRoleRef, true);
			}).catch(function (error) {
				// Handle Errors here.
				var errorCode = error.code;
				var errorMessage = error.message;
				console.log(errorCode);
				console.log(errorMessage);
			});
		});


		$("#login").on("click", () => {
			let email = $("#logemail").val();
			let pwd = $("#logpass").val();
			fbauth.signInWithEmailAndPassword(auth, email, pwd).then(
				somedata => {
					console.log(somedata);
				}).catch(function (error) {
					// Handle Errors here.
					var errorCode = error.code;
					var errorMessage = error.message;
					console.log(errorCode);
					console.log(errorMessage);
				});
		});
	</script>


	<!-- Script containing functions relavant to UI -->
	<script>
		var postCount = 0;
		var postData = "";
		var usrName = "";
		var postLikes = 0;
		var postCommNum = 0;

		var postNum = 0;
		var loadNum = 5;
		var MaxPostNum = 0;
		var pageNumber = 1;

		var likedPostNum;
		var likedPostNum1;
		var likedPostNum2;
		var likedPostNum3;
		var likedPostNum4;

		getPost();
		sleep(200);//
		getPost();//for some reason doesnt load comments in on first call, but does on second call


		//function for adding likes
		var add_like = function (data) {
			$.ajax({
				method: "POST",
				url: "postHandle.php",
				data: { "postId": data },
				success: function (data) {
				}
			})
			getPost();
		}


		//function for adding comments
		var add_comment = function (parentPost, postSlot, commentCount) {
			var newCommTexts = document.querySelectorAll('.commText');
			if (postSlot == 0) {
				var commData = newCommTexts[0].value;
				newCommTexts[0].value = "";
			} else if (postSlot == 1) {
				var commData = newCommTexts[1].value;
				newCommTexts[1].value = "";
			} else if (postSlot == 2) {
				var commData = newCommTexts[2].value;
				newCommTexts[2].value = "";
			} else if (postSlot == 3) {
				var commData = newCommTexts[3].value;
				newCommTexts[3].value = "";
			} else if (postSlot == 4) {
				var commData = newCommTexts[4].value;
				newCommTexts[4].value = "";
			}
			let commUserName = document.getElementById("UsrNme").innerText;
			if (commentCount != 0) {
				commData = "&&" + commData;
				commUserName = "&&" + commUserName;
			}
			console.debug(parentPost);
			console.debug(commData);
			console.log(commUserName);
			console.log(commentCount);
			$.ajax({
				method: "POST",
				url: "postHandle.php",
				data: { "parentPostId": parseInt(parentPost), "commentData": commData, "usrName": commUserName },
				success: function (data) {
					getPost(data);
				}
			})
			getPost();
		}


		// sleep function
		function sleep(milliseconds) {
			const date = Date.now();
			let currentDate = null;
			do {
				currentDate = Date.now();
			} while (currentDate - date < milliseconds);
		}


		//function to get and load the comments
		function getComment(tmpVar, postDispNum, numComms) {
			console.log(tmpVar);
			console.log(postDispNum);

			$.ajax({
				method: "GET",
				url: "postHandle.php",
				data: { "commentedPost": tmpVar },
				success: function (data) {

					console.log(data);
					console.log(" ");

					//Post Display Slot 1
					if (postDispNum == 1) {
						let commbody = document.getElementById('commentSect1');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);

						}
					}
					//Post Display Slot 2
					else if (postDispNum == 2) {
						let commbody = document.getElementById('commentSect2');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);
						}
					}
					//Post Display Slot 3
					else if (postDispNum == 3) {
						let commbody = document.getElementById('commentSect3');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);
						}
					}
					//Post Display Slot 4
					else if (postDispNum == 4) {
						let commbody = document.getElementById('commentSect4');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);
						}
					}
					//Post Display Slot 5
					else if (postDispNum == 5) {
						let commbody = document.getElementById('commentSect5');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						let commentnames = data[0].split('&&');
						let commentlikes = data[1].split('&&');
						let commenttext = data[2].split('&&');
						for (let i = 0; i < numComms; i++) {
							let templateC = document.querySelector('#productComment');
							let commclone = templateC.content.cloneNode(true);
							let commName = commclone.querySelectorAll("h4");
							let commLikes = commclone.querySelectorAll("h5");
							let commData = commclone.querySelectorAll("p");
							commName[0].textContent = commentnames[i];
							commLikes[0].textContent = commentlikes[i];
							commData[0].textContent = commenttext[i];
							commbody.appendChild(commclone);
						}
					}
				}
			})
		}

		//Function to getthe Posts
		function getPost() {
			$.ajax({
				method: "GET",
				url: "postHandle.php",
				data: { "postNum": postNum, "pageNum": pageNumber },
				success: function (data) {
					outPost(data);
				}
			})
		}


		//Function to load and display the posts
		var outPost = function (data) {

			var tbody = document.querySelector('.PostnFeedDiv');
			var cTexts = tbody.querySelectorAll('.commText');
			var cText_1 = cTexts[0];
			var cText_2 = cTexts[1];
			var cText_3 = cTexts[2];
			var cText_4 = cTexts[3];
			var cText_5 = cTexts[4];
			for (postNum = 0; postNum < 25; postNum += 5) {
				usrName = data[postNum + 1];
				postCount = data[postNum];
				if (postCount > MaxPostNum) {
					MaxPostNum = postCount;
				}
				postLikes = data[postNum + 2];
				postData = data[postNum + 3];
				postCommNum = data[postNum + 4];

				//Post Display Slot 1
				if (postNum / 5 == 0) {
					console.log(postCommNum);
					let postbody = document.getElementById('postbox1');
					let postDispName = postbody.querySelectorAll("h3");
					let postDispLikes = postbody.querySelectorAll("h5");
					let postDispData = postbody.querySelectorAll("p");
					let butt = postbody.querySelectorAll("button");
					let cmts = postbody.querySelectorAll('.commText');

					postDispName[0].textContent = "User: " + usrName;
					postDispLikes[0].textContent = "Likes: " + postLikes;
					postDispData[0].textContent = postData;

					likedPostNum = postCount;
					let commCount = postCommNum;
					butt[0].onclick = function () { add_like(likedPostNum); }
					if ((cText_1 != null) || (cText_1 != undefined)) {
						cmts[0].value = cText_1.value;
					} else { cmts[0].value = ""; }
					butt[1].onclick = function () { add_comment(likedPostNum, 0, commCount); }

					if (postCommNum != 0) {
						getComment(postCount, 1, postCommNum);
					} else {
						let commbody = document.getElementById('commentSect1');
						commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
					}
				}

				//Post Display Slot 2
				else if (postNum / 5 == 1) {
					if (data[postNum + 3] == undefined) {
						document.getElementById("postbox2").style.visibility = "hidden";
					}
					else {
						document.getElementById("postbox2").style.visibility = "visible";
						console.log(postCommNum);
						let postbody = document.getElementById('postbox2');
						let postDispName = postbody.querySelectorAll("h3");
						let postDispLikes = postbody.querySelectorAll("h5");
						let postDispData = postbody.querySelectorAll("p");
						let butt = postbody.querySelectorAll("button");
						let cmts = postbody.querySelectorAll('.commText');

						postDispName[0].textContent = "User: " + usrName;
						postDispLikes[0].textContent = "Likes: " + postLikes;
						postDispData[0].textContent = postData;

						likedPostNum1 = postCount;
						let commCount1 = postCommNum;
						butt[0].onclick = function () { add_like(likedPostNum1); }
						if ((cText_2 != null) || (cText_2 != undefined)) {
							cmts[0].value = cText_2.value;
						} else { cmts[0].value = ""; }
						butt[1].onclick = function () { add_comment(likedPostNum1, 1, commCount1); }

						if (postCommNum != 0) {
							getComment(postCount, 2, postCommNum);
						} else {
							let commbody = document.getElementById('commentSect2');
							commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						}
					}
				}

				//Post Display Slot 3
				else if (postNum / 5 == 2) {
					if (data[postNum + 3] == undefined) {
						document.getElementById("postbox3").style.visibility = "hidden";
					}
					else {
						document.getElementById("postbox3").style.visibility = "visible";
						let postbody = document.getElementById('postbox3');
						let postDispName = postbody.querySelectorAll("h3");
						let postDispLikes = postbody.querySelectorAll("h5");
						let postDispData = postbody.querySelectorAll("p");
						let butt = postbody.querySelectorAll("button");
						let cmts = postbody.querySelectorAll('.commText');

						postDispName[0].textContent = "User: " + usrName;
						postDispLikes[0].textContent = "Likes: " + postLikes;
						postDispData[0].textContent = postData;

						likedPostNum2 = postCount;
						let commCount2 = postCommNum;
						butt[0].onclick = function () { add_like(likedPostNum2); }
						if ((cText_3 != null) || (cText_3 != undefined)) {
							cmts[0].value = cText_3.value;
						} else { cmts[0].value = ""; }
						butt[1].onclick = function () { add_comment(likedPostNum2, 2, commCount2); }

						if (postCommNum != 0) {
							getComment(postCount, 3, postCommNum);
						} else {
							let commbody = document.getElementById('commentSect3');
							commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						}
					}
				}

				//Post Display Slot 4
				else if (postNum / 5 == 3) {
					if (data[postNum + 3] == undefined) {
						document.getElementById("postbox4").style.visibility = "hidden";
					}
					else {
						document.getElementById("postbox4").style.visibility = "visible";
						let postbody = document.getElementById('postbox4');
						let postDispName = postbody.querySelectorAll("h3");
						let postDispLikes = postbody.querySelectorAll("h5");
						let postDispData = postbody.querySelectorAll("p");
						let butt = postbody.querySelectorAll("button");
						let cmts = postbody.querySelectorAll('.commText');

						postDispName[0].textContent = "User: " + usrName;
						postDispLikes[0].textContent = "Likes: " + postLikes;
						postDispData[0].textContent = postData;

						likedPostNum3 = postCount;
						let commCount3 = postCommNum;

						butt[0].onclick = function () { add_like(likedPostNum3); }
						if ((cText_4 != null) || (cText_4 != undefined)) {
							cmts[0].value = cText_4.value;
						} else { cmts[0].value = ""; }
						butt[1].onclick = function () { add_comment(likedPostNum3, 3, commCount3); }

						if (postCommNum != 0) {
							getComment(postCount, 4, postCommNum);
						} else {
							let commbody = document.getElementById('commentSect4');
							commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						}
					}
				}

				//Post Display Slot 5
				else if (postNum / 5 == 4) {
					if (data[postNum + 3] == undefined) {
						document.getElementById("postbox5").style.visibility = "hidden";
					}
					else {
						document.getElementById("postbox5").style.visibility = "visible";
						let postbody = document.getElementById('postbox5');
						let postDispName = postbody.querySelectorAll("h3");
						let postDispLikes = postbody.querySelectorAll("h5");
						let postDispData = postbody.querySelectorAll("p");
						let butt = postbody.querySelectorAll("button");
						let cmts = postbody.querySelectorAll('.commText');

						postDispName[0].textContent = "User: " + usrName;
						postDispLikes[0].textContent = "Likes: " + postLikes;
						postDispData[0].textContent = postData;

						likedPostNum4 = postCount;
						let commCount4 = postCommNum;

						butt[0].onclick = function () { add_like(likedPostNum4); }
						if ((cText_5 != null) || (cText_5 != undefined)) {
							cmts[0].value = cText_5.value;
						} else { cmts[0].value = ""; }
						butt[1].onclick = function () { add_comment(likedPostNum4, 4, commCount4); }

						if (postCommNum != 0) {
							getComment(postCount, 5, postCommNum);
						} else {
							let commbody = document.getElementById('commentSect5');
							commbody.innerHTML = "<h4 style='text-align: left; padding-left: 2px'>Comments:</h4>";
						}
					}
				}
			}
			document.getElementById("PageNum").innerText = pageNumber;
		}

		//setInterval (getPost,25000);

		//function used to change introduction based on user input name
		var submitName = function () {
			document.getElementById("uName").innerText = "What's on your mind, " + document.getElementById("name").value + "? Read / Write about it?";
			document.getElementById("profName").innerText = document.getElementById("name").value + "'s Preferences:";
			document.getElementById("UsrNme").innerText = document.getElementById("name").value;
			$.ajax({
				method: "POST",
				url: "cheatsheet.php",
				data: { "receiver_name": document.getElementById("name").value },
				success: function (data) {

				}
			})
		}


		//Function to change the color
		var toColor = function (d) {
			var c = Number(d).toString(16);
			return "#" + ("000000".substr(0, 6 - c.length) + c.toUpperCase());
		}


		//function used to change the color of the headers based on user input
		var changeColorHandler = function (evt) {
			let mycolor = evt.currentTarget.value
			let wordColor = toColor((Number(Number(mycolor).toString(16)) + 0x777777) % 0xffffff);
			var FeedBackgnd = document.getElementsByClassName("PostnFeedDiv");
			FeedBackgnd[0].style.background = mycolor;
			var elements = document.getElementsByClassName("multicolorF");
			for (var i = 0; i < elements.length; i++) {
				elements[i].style.color = wordColor;
			}
		}


		//function to clear the posts (depricated)
		var clearPosts = function () {
			var tbody = document.querySelector("tbody");
			tbody.innerHTML = '';
		}


		//previous page function for page navigation
		var prevPage = function () {
			if (pageNumber > 1) {
				pageNumber = pageNumber - 1;
			}
			getPost();
		}


		//next page function for page navigation
		var nextPage = function () {
			if (pageNumber < ((MaxPostNum - 1) / 5) + 1) {
				pageNumber = pageNumber + 1;
			}
			getPost();
		}

		//function to display the posts (depricated)
		var printPost = function () {
			$.ajax({
				method: "POST",
				url: "postHandle.php",
				data: { "postName": document.getElementById("UsrNme").innerText, "postText": document.getElementById("post").value },
				success: function (data) {

				}
			})
			document.getElementById("post").value = "";
			sleep(250);
			getPost();
		}


		//Actually changes the color if the Words / Feed Background
		document.querySelector("#wordColor").addEventListener(
			"change",
			changeColorHandler
		)


	</script>
</body>

</html>